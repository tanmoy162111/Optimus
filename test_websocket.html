<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Test</title>
</head>
<body>
    <h1>WebSocket Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="messages"></div>

    <script src="http://localhost:5176/src/services/socket.ts"></script>
    <script>
        // Test WebSocket connection
        const statusDiv = document.getElementById('status');
        const messagesDiv = document.getElementById('messages');
        
        // Try to connect to WebSocket
        try {
            const socket = io('http://localhost:5000', {
                transports: ['websocket', 'polling']
            });
            
            socket.on('connect', () => {
                statusDiv.innerHTML = '✅ Connected to WebSocket server';
                messagesDiv.innerHTML += '<p>Connected with ID: ' + socket.id + '</p>';
            });
            
            socket.on('disconnect', (reason) => {
                statusDiv.innerHTML = '❌ Disconnected: ' + reason;
            });
            
            socket.on('connect_error', (error) => {
                statusDiv.innerHTML = '❌ Connection Error: ' + error.message;
                messagesDiv.innerHTML += '<p>Error: ' + error.message + '</p>';
            });
            
            // Test a simple event
            socket.on('system_status', (data) => {
                messagesDiv.innerHTML += '<p>System Status: ' + JSON.stringify(data) + '</p>';
            });
            
        } catch (error) {
            statusDiv.innerHTML = '❌ Error: ' + error.message;
        }
    </script>
</body>
</html>